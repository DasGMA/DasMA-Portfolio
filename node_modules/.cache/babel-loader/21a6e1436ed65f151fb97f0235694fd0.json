{"ast":null,"code":"import _classCallCheck from \"/home/das/Desktop/DasMA-Portfolio/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/das/Desktop/DasMA-Portfolio/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/das/Desktop/DasMA-Portfolio/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/das/Desktop/DasMA-Portfolio/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/das/Desktop/DasMA-Portfolio/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/das/Desktop/DasMA-Portfolio/src/Components/Blog/Blog.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { Route } from 'react-router-dom';\nimport { Container, Row, Col } from 'react-materialize';\nimport Search from './Search';\nimport BlogPost from './BlogPost';\nimport BlogPostView from './BlogPostView';\nimport NewBlogPost from './NewBlogPost';\nimport Admin from './Admin';\nimport { decode } from 'iconv-lite';\nvar URL = 'http://ma:9000/posts';\n\nvar Blog =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Blog, _Component);\n\n  function Blog(props) {\n    var _this;\n\n    _classCallCheck(this, Blog);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Blog).call(this, props));\n\n    _this.handleSearch = function (event) {\n      _this.setState({\n        search: event.target.value,\n        posts: _this.state.searchPosts.filter(function (post) {\n          return new RegExp(event.target.value, \"i\").exec(post.title);\n        })\n      });\n    };\n\n    _this.newPost = function () {\n      _this.setState(function (prevState) {\n        return {\n          show: !prevState.show\n        };\n      });\n    };\n\n    _this.admin = function () {\n      _this.setState(function (prevState) {\n        return {\n          adminLogin: !prevState.adminLogin\n        };\n      });\n    };\n\n    _this.getToken = function () {\n      return localStorage.getItem('token');\n    };\n\n    _this.logout = function () {\n      localStorage.removeItem('token');\n    };\n\n    _this.loggedIn = function () {\n      var token = _this.getToken();\n\n      return !!token && !_this.isTokenExpired(token);\n    };\n\n    _this.isTokenExpired = function (token) {\n      try {\n        var decoded = decode(token);\n\n        if (decoded.exp < Date.now() / 1000) {\n          return true;\n        } else {\n          return false;\n        }\n      } catch (error) {\n        return false;\n      }\n    };\n\n    _this.state = {\n      posts: [],\n      search: '',\n      searchPosts: [],\n      show: false,\n      adminLogin: false,\n      adminLoggedIn: false\n    };\n    return _this;\n  }\n\n  _createClass(Blog, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      axios.get(URL).then(function (response) {\n        console.log(response.data);\n\n        _this2.setState({\n          posts: response.data,\n          searchPosts: response.data\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      console.log(this.props.match.path);\n      var _this$state = this.state,\n          posts = _this$state.posts,\n          search = _this$state.search;\n      var layout = React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(Search, {\n        handleSearch: this.handleSearch,\n        search: search,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }), React.createElement(Col, {\n        s: 12,\n        m: 3,\n        style: {\n          color: '#fff',\n          border: '1px solid yellow'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, \"Categories\"), React.createElement(Col, {\n        s: 12,\n        m: 9,\n        style: {\n          color: '#fff',\n          border: '1px solid yellow'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, posts.map(function (post) {\n        return React.createElement(BlogPost, {\n          key: post.id,\n          id: post.id,\n          title: post.title,\n          content: post.content,\n          category: post.category,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101\n          },\n          __self: this\n        });\n      }), React.createElement(Route, {\n        path: \"\".concat(this.props.match.path, \"/:id\"),\n        component: BlogPostView,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      })));\n      return React.createElement(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.newPost,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, \"New Post\"), React.createElement(\"button\", {\n        onClick: this.admin,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, \"Admin Login\"), this.state.show ? React.createElement(NewBlogPost, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }) : layout, this.state.adminLogin ? React.createElement(Admin, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }) : null);\n    }\n  }]);\n\n  return Blog;\n}(Component);\n\nexport default Blog;","map":{"version":3,"sources":["/home/das/Desktop/DasMA-Portfolio/src/Components/Blog/Blog.js"],"names":["React","Component","axios","Route","Container","Row","Col","Search","BlogPost","BlogPostView","NewBlogPost","Admin","decode","URL","Blog","props","handleSearch","event","setState","search","target","value","posts","state","searchPosts","filter","post","RegExp","exec","title","newPost","prevState","show","admin","adminLogin","getToken","localStorage","getItem","logout","removeItem","loggedIn","token","isTokenExpired","decoded","exp","Date","now","error","adminLoggedIn","get","then","response","console","log","data","catch","match","path","layout","color","border","map","id","content","category"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport { Route } from 'react-router-dom';\r\nimport { Container, Row, Col } from 'react-materialize';\r\nimport Search from './Search';\r\nimport BlogPost from './BlogPost';\r\nimport BlogPostView from './BlogPostView';\r\nimport NewBlogPost from './NewBlogPost';\r\nimport Admin from './Admin';\r\nimport { decode } from 'iconv-lite';\r\n\r\nconst URL = 'http://ma:9000/posts';\r\n\r\nclass Blog extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            posts: [],\r\n            search: '',\r\n            searchPosts: [],\r\n            show: false,\r\n            adminLogin: false,\r\n            adminLoggedIn: false\r\n        }\r\n    }\r\n\r\n    componentDidMount () {\r\n        axios.get(URL)\r\n        .then(response => {\r\n            console.log(response.data)\r\n            this.setState({\r\n                posts: response.data,\r\n                searchPosts: response.data\r\n            })\r\n        })\r\n        .catch(error => {\r\n          console.log(error);\r\n        });\r\n    }\r\n\r\n    handleSearch = (event) => {\r\n        this.setState ({\r\n          search: event.target.value,\r\n          posts: this.state.searchPosts.filter((post) => \r\n            new RegExp(event.target.value, \"i\").exec(post.title))\r\n        });\r\n    }\r\n\r\n    newPost = () => {\r\n        this.setState(prevState => ({\r\n            show: !prevState.show\r\n        }));\r\n    }\r\n\r\n    admin = () => {\r\n        this.setState(prevState => ({\r\n            adminLogin: !prevState.adminLogin\r\n        }));\r\n    }\r\n\r\n    getToken = () => {\r\n        return localStorage.getItem('token');\r\n    }\r\n\r\n    logout = () => {\r\n        localStorage.removeItem('token');\r\n    }\r\n\r\n    loggedIn = () => {\r\n        const token = this.getToken();\r\n        return !!token && !this.isTokenExpired(token);\r\n    }\r\n\r\n    isTokenExpired = (token) => {\r\n        try {\r\n            const decoded = decode(token);\r\n            if (decoded.exp < Date.now() / 1000) {\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n        catch (error) {\r\n            return false;\r\n        }\r\n    }\r\n    \r\n\r\n    render() {\r\n        console.log(this.props.match.path)\r\n        const { posts, search } = this.state;\r\n        const layout =  <Row>\r\n                            <Search handleSearch = {this.handleSearch} search = {search}/>\r\n                            <Col s={12} m={3} style = {{color: '#fff', border: '1px solid yellow'}}>\r\n                             Categories\r\n                            </Col>\r\n\r\n                            <Col s={12} m={9} style = {{color: '#fff', border: '1px solid yellow'}}>\r\n                                {posts.map(post => {\r\n                                    return (\r\n                                        <BlogPost\r\n                                            key = {post.id}\r\n                                            id = {post.id}\r\n                                            title = {post.title}\r\n                                            content = {post.content}\r\n                                            category = {post.category}\r\n                                        />\r\n                                    )\r\n                                })}\r\n                            <Route path = {`${this.props.match.path}/:id`} component = { BlogPostView } />\r\n                            </Col>\r\n                        </Row>\r\n\r\n        return (\r\n            <Container>\r\n                <button onClick = {this.newPost}>New Post</button>\r\n                <button onClick = {this.admin}>Admin Login</button>\r\n                \r\n                {this.state.show ? <NewBlogPost /> : layout}\r\n                {this.state.adminLogin ? <Admin /> : null}\r\n            </Container>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Blog;"]},"metadata":{},"sourceType":"module"}